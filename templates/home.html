<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="theme-color" content="#000000">

<title>Maki â¤ï¸</title>

<link rel="manifest" href="/static/manifest.json">
<link rel="icon" href="/static/images/icon.png">

<style>
body{
    margin:0;
    font-family:'Segoe UI', sans-serif;
    overflow:hidden;
    background:black;
    color:white;
}

/* â¤ï¸ pantalla carga */
#splash{
    position:fixed;
    inset:0;
    display:flex;
    justify-content:center;
    align-items:center;
    flex-direction:column;
    background:black;
    z-index:1000;
}

/* ğŸ’“ corazÃ³n */
.heart{
    width:90px;
    height:90px;
    background:#ff2d55;
    transform:rotate(-45deg);
    animation:beat 1s infinite;
    position:relative;
}
.heart:before,
.heart:after{
    content:"";
    position:absolute;
    width:90px;
    height:90px;
    background:#ff2d55;
    border-radius:50%;
}
.heart:before{top:-45px;}
.heart:after{left:45px;}

@keyframes beat{
    0%,100%{transform:scale(1) rotate(-45deg);}
    50%{transform:scale(1.2) rotate(-45deg);}
}

/* ğŸŒ¸ pantalla principal */
#main{
    display:none;
    height:100vh;
    background:linear-gradient(135deg,#ff758c,#ff7eb3);
    display:flex;
    justify-content:center;
    align-items:center;
    text-align:center;
    padding:20px;
}

/* ğŸ’Œ tarjeta */
.card{
    background:rgba(255,255,255,0.15);
    backdrop-filter:blur(15px);
    padding:30px;
    border-radius:25px;
    max-width:420px;
}

/* âœ¨ botones */
button{
    padding:14px 22px;
    border:none;
    border-radius:14px;
    font-size:16px;
    background:#ff2d55;
    color:white;
    cursor:pointer;
    margin-top:15px;
}

/* ğŸ† fuegos */
.fire{
    position:absolute;
    width:6px;
    height:6px;
    border-radius:50%;
    animation:explode 1.3s forwards;
}
@keyframes explode{
    to{
        transform:translate(var(--x),var(--y));
        opacity:0;
    }
}

/* ğŸ“² instalar */
#installBtn{
    display:none;
}
</style>
</head>

<body>

<!-- â¤ï¸ splash -->
<div id="splash">
    <div class="heart"></div>
    <p>Abriendo algo muy especialâ€¦</p>
</div>

<!-- ğŸŒ¸ app -->
<div id="main">
    <div class="card">

        <button id="installBtn">ğŸ“² Instalar</button>

        <h2>ğŸ’– Para vos, Maki ğŸ’–</h2>

        <p id="text">
            Desde que llegaste a mi vida todo cambiÃ³â€¦  
            pero esto es solo el comienzo.
        </p>

        <button onclick="next()">Siguiente ğŸ’Œ</button>

    </div>
</div>

<audio id="music" loop>
<source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_5b2b6b14c6.mp3?filename=romantic-ambient-piano-110624.mp3">
</audio>

<script>

/* â¤ï¸ transiciÃ³n splash */
setTimeout(()=>{
    document.getElementById("splash").style.display="none";
    document.getElementById("main").style.display="flex";
    document.getElementById("music").play();
},2500);

/* ğŸ’Œ historia romÃ¡ntica */
const msgs=[
"Makiâ€¦ no sÃ© en quÃ© momento te volviste mi lugar seguro ğŸ’–",
"Me encanta tu sonrisa, tu mirada y la paz que me das.",
"Quiero acompaÃ±arte en cada sueÃ±o, cada meta y cada dÃ­a.",
"No importa el tiempo ni la distanciaâ€¦ siempre te voy a elegir.",
"Porque lo Ãºnico que tengo claroâ€¦ es que quiero un futuro con vos â¤ï¸"
];

let i=0;

function next(){
    if(i < msgs.length){
        document.getElementById("text").innerHTML = msgs[i];
        fireworks();
        i++;
    }else{
        final();
    }
}

/* ğŸ† fuegos */
function fireworks(){
    for(let j=0;j<80;j++){
        let p=document.createElement("div");
        p.className="fire";
        p.style.left=50+"vw";
        p.style.top=50+"vh";
        p.style.background=`hsl(${Math.random()*360},100%,60%)`;

        let x=(Math.random()-0.5)*350+"px";
        let y=(Math.random()-0.5)*350+"px";
        p.style.setProperty("--x",x);
        p.style.setProperty("--y",y);

        document.body.appendChild(p);
        setTimeout(()=>p.remove(),1300);
    }
}

/* ğŸ’– final */
function final(){
    document.querySelector(".card").innerHTML=`
    <h1>ğŸ’ Â¿QuerÃ©s seguir escribiendo esta historia conmigo?</h1>
    <p>Porque yo quiero elegirte todos los dÃ­as de mi vida â¤ï¸</p>
    `;
    fireworks();
}

/* ğŸ“² PWA */
if('serviceWorker' in navigator){
    navigator.serviceWorker.register('/sw.js');
}

let deferredPrompt;
const installBtn=document.getElementById("installBtn");

window.addEventListener("beforeinstallprompt",(e)=>{
    e.preventDefault();
    deferredPrompt=e;
    installBtn.style.display="block";
});

installBtn.addEventListener("click",async ()=>{
    installBtn.style.display="none";
    deferredPrompt.prompt();
    await deferredPrompt.userChoice;
    deferredPrompt=null;
});

</script>

</body>
</html>