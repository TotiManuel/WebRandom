<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="theme-color" content="#000000">
<title>Regalo</title>

<style>
body{
    margin:0;
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    background: radial-gradient(circle at center, #111, #000);
    overflow:hidden;
    font-family: system-ui, sans-serif;
    perspective:1200px;
}

/* Escena */
.scene{
    width:260px;
    height:260px;
}

/* Regalo */
.gift{
    width:220px;
    height:220px;
    position:relative;
    transform-style:preserve-3d;
    animation: float 3s ease-in-out infinite;
    cursor:pointer;
}

/* Flotar */
@keyframes float{
    0%,100%{ transform: translateY(0) rotateY(0deg); }
    50%{ transform: translateY(-20px) rotateY(8deg); }
}

.gift.open{
    animation:none;
}

/* Caja */
.box{
    width:100%;
    height:100%;
    background:linear-gradient(145deg,#c10000,#ff0000);
    border-radius:20px;
    position:absolute;
    box-shadow:
        inset -8px -8px 20px rgba(0,0,0,0.6),
        inset 8px 8px 15px rgba(255,255,255,0.2),
        0 20px 40px rgba(0,0,0,0.8);
}

/* Cintas */
.ribbon-v{
    width:32px;
    height:100%;
    background:linear-gradient(#ffe066,#ffcc00);
    position:absolute;
    left:50%;
    transform:translateX(-50%);
}

.ribbon-h{
    height:32px;
    width:100%;
    background:linear-gradient(#ffe066,#ffcc00);
    position:absolute;
    top:50%;
    transform:translateY(-50%);
}

/* Tapa */
.lid{
    width:240px;
    height:70px;
    background:linear-gradient(145deg,#d90000,#ff1a1a);
    position:absolute;
    top:-60px;
    left:-10px;
    border-radius:20px;
    transform-origin:bottom;
    transition:1.2s cubic-bezier(.3,.7,.3,1);
    box-shadow:
        inset -5px -5px 15px rgba(0,0,0,0.5),
        inset 5px 5px 10px rgba(255,255,255,0.2),
        0 10px 30px rgba(0,0,0,0.7);
}

.gift.open .lid{
    transform: rotateX(-140deg);
}

/* Moño realista */
.bow{
    position:absolute;
    top:-95px;
    left:50%;
    transform:translateX(-50%);
    width:80px;
    height:50px;
}

.loop{
    position:absolute;
    width:40px;
    height:50px;
    background:linear-gradient(#ffd700,#ffcc00);
    border-radius:50% 50% 40% 40%;
}

.loop.left{ left:0; transform:rotate(-20deg);}
.loop.right{ right:0; transform:rotate(20deg);}

.knot{
    width:26px;
    height:26px;
    background:linear-gradient(#ffe066,#ffcc00);
    border-radius:50%;
    position:absolute;
    left:50%;
    top:12px;
    transform:translateX(-50%);
}

/* Contenido */
.content{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    text-align:center;
    opacity:0;
    transition:1s;
    width:92%;
}

.content img{
    width:100%;
    border-radius:20px;
    box-shadow:0 20px 50px rgba(0,0,0,0.8);
}

.message{
    color:white;
    margin-top:15px;
    font-size:20px;
    min-height:28px;
}

.show{ opacity:1; }

/* Partículas */
.sparkle{
    position:absolute;
    width:6px;
    height:6px;
    background:white;
    border-radius:50%;
    animation: spark 1.4s ease-out forwards;
}

@keyframes spark{
    0%{ transform:scale(0); opacity:1;}
    100%{ transform:translateY(-220px) scale(1.4); opacity:0;}
}

</style>
</head>

<body>

<div class="scene">
<div class="gift" id="gift">

    <div class="lid"></div>

    <div class="box">
        <div class="ribbon-v"></div>
        <div class="ribbon-h"></div>
    </div>

    <div class="bow">
        <div class="loop left"></div>
        <div class="loop right"></div>
        <div class="knot"></div>
    </div>

</div>
</div>

<div class="content" id="content">
    <!-- CAMBIÁ LA FOTO -->
    <img src="https://picsum.photos/500/600">
    <div class="message" id="msg"></div>
</div>

<script>
const gift = document.getElementById("gift");
const content = document.getElementById("content");
const msg = document.getElementById("msg");

const text = "Feliz cumpleaños ❤️ Gracias por existir.";

gift.addEventListener("click", () => {

    gift.classList.add("open");

    /* Vibración móvil */
    if(navigator.vibrate){
        navigator.vibrate([200,80,200,80,300]);
    }

    /* Partículas */
    for(let i=0;i<80;i++){
        let s = document.createElement("div");
        s.classList.add("sparkle");
        s.style.left = Math.random()*window.innerWidth+"px";
        s.style.top = Math.random()*window.innerHeight+"px";
        document.body.appendChild(s);
        setTimeout(()=>s.remove(),1400);
    }

    setTimeout(()=>{
        content.classList.add("show");
        write();
    },1000);
});

/* Mensaje escribiéndose */
function write(){
    let i=0;
    function t(){
        if(i < text.length){
            msg.innerHTML += text[i];
            i++;
            setTimeout(t,40);
        }
    }
    t();
}
</script>

</body>
</html>
