<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="theme-color" content="#000000">
<title>Regalo</title>

<style>
body{
    margin:0;
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    background:radial-gradient(circle at center,#111,#000);
    overflow:hidden;
    font-family:system-ui,sans-serif;
    perspective:1400px;
}

/* ESCENA */
.scene{
    width:260px;
    height:260px;
    position:relative;
}

/* REGALO */
.gift{
    width:200px;
    height:200px;
    position:absolute;
    top:30px;
    left:30px;
    transform-style:preserve-3d;
    animation:float 4s ease-in-out infinite;
    transition:transform 1s ease;
}

@keyframes float{
    0%,100%{ transform:translateY(0) rotateY(0deg); }
    50%{ transform:translateY(-15px) rotateY(8deg); }
}

.gift.open{
    animation:none;
}

/* CARAS DE LA CAJA */
.face{
    position:absolute;
    width:200px;
    height:200px;
    background:linear-gradient(145deg,#b80000,#ff1a1a);
    box-shadow:
        inset -10px -10px 25px rgba(0,0,0,0.6),
        inset 10px 10px 20px rgba(255,255,255,0.2);
}

/* Frente */
.front{ transform:translateZ(100px); }
/* Atrás */
.back{ transform:rotateY(180deg) translateZ(100px); }
/* Derecha */
.right{ transform:rotateY(90deg) translateZ(100px); }
/* Izquierda */
.left{ transform:rotateY(-90deg) translateZ(100px); }
/* Abajo */
.bottom{ transform:rotateX(-90deg) translateZ(100px); }

/* TAPA */
.lid{
    position:absolute;
    width:200px;
    height:60px;
    background:linear-gradient(145deg,#d80000,#ff2a2a);
    top:-60px;
    transform-origin:bottom;
    transition:1.2s cubic-bezier(.25,.8,.25,1);
    box-shadow:
        inset -5px -5px 15px rgba(0,0,0,0.5),
        inset 5px 5px 10px rgba(255,255,255,0.2),
        0 15px 40px rgba(0,0,0,0.7);
}

.gift.open .lid{
    transform:rotateX(-130deg);
}

/* CINTAS */
.ribbon-v{
    position:absolute;
    width:28px;
    height:200px;
    background:linear-gradient(#ffe066,#ffcc00);
    left:86px;
    transform:translateZ(101px);
}

.ribbon-h{
    position:absolute;
    width:200px;
    height:28px;
    background:linear-gradient(#ffe066,#ffcc00);
    top:86px;
    transform:translateZ(101px);
}

/* MOÑO */
.bow{
    position:absolute;
    top:-90px;
    left:50%;
    transform:translateX(-50%);
    width:80px;
    height:50px;
}

.loop{
    position:absolute;
    width:40px;
    height:50px;
    background:linear-gradient(#ffd700,#ffcc00);
    border-radius:50%;
    box-shadow:0 5px 10px rgba(0,0,0,0.4);
}

.loop.left{ left:0; transform:rotate(-25deg);}
.loop.right{ right:0; transform:rotate(25deg);}

.knot{
    width:25px;
    height:25px;
    background:linear-gradient(#ffe066,#ffcc00);
    border-radius:50%;
    position:absolute;
    left:50%;
    top:12px;
    transform:translateX(-50%);
}

/* CONTENIDO */
.content{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    text-align:center;
    opacity:0;
    transition:1s;
    width:92%;
}

.content img{
    width:100%;
    border-radius:20px;
    box-shadow:0 20px 50px rgba(0,0,0,0.8);
}

.message{
    color:white;
    margin-top:15px;
    font-size:20px;
    min-height:28px;
}

.show{ opacity:1; }

/* PARTÍCULAS */
.sparkle{
    position:absolute;
    width:6px;
    height:6px;
    background:white;
    border-radius:50%;
    animation:spark 1.5s ease-out forwards;
}

@keyframes spark{
    0%{ transform:scale(0); opacity:1;}
    100%{ transform:translateY(-250px) scale(1.5); opacity:0;}
}
</style>
</head>

<body>

<div class="scene">
<div class="gift" id="gift">

    <div class="lid"></div>

    <div class="face front"></div>
    <div class="face back"></div>
    <div class="face right"></div>
    <div class="face left"></div>
    <div class="face bottom"></div>

    <div class="ribbon-v"></div>
    <div class="ribbon-h"></div>

    <div class="bow">
        <div class="loop left"></div>
        <div class="loop right"></div>
        <div class="knot"></div>
    </div>

</div>
</div>

<div class="content" id="content">
    <img src="https://picsum.photos/500/600">
    <div class="message" id="msg"></div>
</div>

<script>
const gift = document.getElementById("gift");
const content = document.getElementById("content");
const msg = document.getElementById("msg");
const text = "Feliz cumpleaños ❤️ Gracias por existir.";

/* SOMBRA DINÁMICA SEGÚN MOVIMIENTO */
document.addEventListener("mousemove", e=>{
    let x = (e.clientX/window.innerWidth - 0.5)*20;
    let y = (e.clientY/window.innerHeight - 0.5)*-20;
    gift.style.transform = `rotateY(${x}deg) rotateX(${y}deg)`;
});

/* ABRIR */
gift.addEventListener("click", ()=>{

    gift.classList.add("open");

    if(navigator.vibrate){
        navigator.vibrate([200,100,300]);
    }

    for(let i=0;i<100;i++){
        let s = document.createElement("div");
        s.classList.add("sparkle");
        s.style.left = Math.random()*window.innerWidth+"px";
        s.style.top = Math.random()*window.innerHeight+"px";
        document.body.appendChild(s);
        setTimeout(()=>s.remove(),1500);
    }

    setTimeout(()=>{
        content.classList.add("show");
        type();
    },1000);
});

function type(){
    let i=0;
    function t(){
        if(i < text.length){
            msg.innerHTML += text[i];
            i++;
            setTimeout(t,40);
        }
    }
    t();
}
</script>

</body>
</html>
